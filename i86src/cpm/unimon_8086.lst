 AS V1.42 Beta [Bld 227] - Source File unimon_8086.asm - Page 1 - 4/19/2024 13:48:3


       1/       0 :                     	page 0
       2/       0 :                     ;;;
       3/       0 :                     ;;; Universal Monitor 8086
       4/       0 :                     ;;;   Copyright (C) 2020 Haruo Asano
       5/       0 :                     ;;;
       6/       0 :                     
       7/       0 :                     	CPU	8086
       8/       0 :                     
       9/       0 : ="8088"              TARGET:	EQU	"8088"
      10/       0 :                     
      11/       0 : =1H                  CPM86 = 1
      12/       0 :                     
      13/       0 :                     ;;;
      14/       0 :                     ;;; Memory
      15/       0 :                     ;;;
      16/       0 :                     
      17/       0 : =7F50H               MON_CSEG	equ	07f50h
      18/       0 : =7F30H               MON_DSEG	equ	07f30h
      19/       0 : =40H                 FREE_SEG	equ	0040h
      20/       0 : =2500H               BIOS_IP		equ	2500h		; CP\M-86 BIOS start IP
      21/       0 :                     
      22/       0 : =40H                 CPM86_CODE	equ	FREE_SEG
      23/       0 : =2500H               BIOS_ENTRY	equ	2500h
      24/       0 : =2503H               WORM_ENTRY	equ	2503h		; ccp abort
      25/       0 : =3H                  ABORT_ENTRY	equ	0003h		; ccp abort
      26/       0 :                     
      27/       0 : =0H                  COM_BUF	equ	0
      28/       0 : =100H                WORK_B:	EQU	0100h
      29/       0 : =100H                STACK:	EQU	WORK_B
      30/       0 :                     
      31/       0 : =50H                 BUFLEN:	EQU	80
      32/       0 : =100H                VECSIZ:	EQU	256		; Number of vectors to be initialized
      33/       0 :                     
      34/       0 : =84H                 int21hvec:	equ	021h * 4 ; INT 0E0H Vector table offset
      35/       0 :                     
      36/       0 :                     ;;; Constants
      37/       0 : =0DH                 CR:	EQU	0DH
      38/       0 : =0AH                 LF:	EQU	0AH
      39/       0 : =8H                  BS:	EQU	08H
      40/       0 : =7FH                 DEL:	EQU	7FH
      41/       0 :                     
      42/       0 : =10H                 F_bitSize	equ	16
      43/       0 : =0FD5H               f_msk_bit	equ	0000111111010101b
      44/       0 : =0ED5H               Tbit_OFF	equ	0000111011010101b
      45/       0 : =100H                Tbit_ON_	equ	0000000100000000b
      46/       0 :                     
      47/       0 :                     	ASSUME	CS:CODE, DS:DATA, SS:DATA, ES:NOTHING
      48/       0 :                     
      49/       0 :                     ;;;
      50/       0 :                     ;;; ROM area
      51/       0 :                     ;;;
      52/       0 :                     
      53/       0 :                     	SEGMENT	CODE
      54/       0 :                     
      55/       0 :                     	org	0
      56/       0 :                     
      57/       0 : =1H                  REQ_CONIN	equ	1
      58/       0 : =2H                  REQ_CONOUT	equ	2
      59/       0 : =3H                  REQ_CONST	equ	3
      60/       0 : =4H                  REQ_STROUT	equ	4
      61/       0 : =0H                  DUMMY_PORT	equ	0
      62/       0 : =7H                  MNI_LEDOFF	equ	07h	; NMI signal off request command
      63/       0 :                     
      64/       0 :                     ;  ---- request command to PIC
      65/       0 :                     ; UREQ_COM = 1 ; CONIN  : return char in UNI_CHR
      66/       0 :                     ;          = 2 ; CONOUT : UNI_CHR = output char
      67/       0 :                     ;          = 3 ; CONST  : return status in UNI_CHR
      68/       0 :                     ;                       : ( 0: no key, 1 : key exist )
      69/       0 :                     ;          = 4 ; STROUT : string address = (PTRSAV, PTRSAV_SEG)
      70/       0 :                     ;          = 5 ; DISK READ
      71/       0 :                     ;          = 6 ; DISK WRITE
      72/       0 :                     ;          = 7 ; NMI LED OFF
      73/       0 :                     ;          = 0 ; request is done( return this flag from PIC )
      74/       0 :                     ;                return status is in UNI_CHR;
      75/       0 :                     ;
      76/       0 :                     
      77/       0 :                     ; ------------------ unimon Command 
      78/       0 : 00                  UREQ_COM	db	0	; location 00	:unimon request command
      79/       1 :                     ; ------------------ unimon CONSOLE I/O
      80/       1 : 00                  UNI_CHR		db	0	; location 01	:charcter (CONIN/CONOUT) or counts(STROUT) or status
      81/       2 : 00 00               STR_OFF		dw	0	; location 02	:string offset
      82/       4 : 00 00               STR_SEG		dw	0	; location 04	:string segment
      83/       6 :                     ; ------------------ CBIOS Command
      84/       6 : 00                  CREQ_COM	db	0	; location 06	:CBIOS request command
      85/       7 :                     ; ------------------ CBIOS CONSOLE I/O
      86/       7 : 00                  CBI_CHR		db	0	; location 07	:charcter (CONIN/CONOUT) or counts(STROUT) or status
      87/       8 : 00                  disk_drive	db	0	; location 08	:
      88/       9 : 00                  disk_track	db	0	; location 09	:
      89/       A : 00 00               disk_sector	dw	0	; location 0A	:
      90/       C : 00 00               data_dmal	dw	0	; location 0C	:
      91/       E : 00 00               data_dmah	dw	0	; location 0E	:
      92/      10 :                     
      93/      10 :                     CSTART:
      94/      10 : B8 30 7F            	MOV	AX,MON_DSEG
      95/      13 : 8E D8               	MOV	DS,AX
      96/      15 : 8E C0               	mov	es,ax
      97/      17 : 8E D0               	MOV	SS,AX
      98/      19 : A3 78 01            	MOV	[REGSS],AX	; set init SS value
      99/      1C : B8 00 01            	mov	ax, STACK
     100/      1F : 8B E0               	MOV	SP, ax
     101/      21 : A3 6A 01            	MOV	[REGSP],AX	; set init SP value
     102/      24 :                     	
     103/      24 : B0 49               	MOV	AL,'I'
     104/      26 : A2 5C 01            	MOV	[HEXMOD],AL	; Intel Hex mode
     105/      29 : 33 C0               	XOR	AX,AX
     106/      2B : A3 52 01            	MOV	[DSADDR],AX	; set dump start address
     107/      2E : A3 58 01            	MOV	[GADDR],AX	; set Go address to 0000h
     108/      31 : A3 5A 01            	MOV	[SADDR],AX	; Set memory address
     109/      34 :                     
     110/      34 :                     	; init break point
     111/      34 : A2 7C 01            	mov	[bflg], al	; clear break flag
     112/      37 :                     
     113/      37 :                     	;; Initialize register value
     114/      37 : BB 60 01            	MOV	BX,REG_B
     115/      3A : B9 0E 00            	MOV	CX,(REG_E - REG_B)/2
     116/      3D :                     IR0:
     117/      3D : 89 07               	MOV	[BX],AX
     118/      3F : 43                  	INC	BX
     119/      40 : 43                  	INC	BX
     120/      41 : 49                  	DEC	CX
     121/      42 : 75 F9               	JNE	IR0
     122/      44 :                     
     123/      44 : B8 40 00            	mov	ax, FREE_SEG	; set free memory start segment
     124/      47 : A3 50 01            	MOV	[CURSEG],AX	; set current segment
     125/      4A : A3 74 01            	mov	[REGCS], ax
     126/      4D :                     	; init break point segment
     127/      4D : A3 7E 01            	mov	[brkcs], ax
     128/      50 :                     
     129/      50 : B8 00 25            	mov	ax, BIOS_IP
     130/      53 : A3 72 01            	mov	[REGIP], ax	; set start IP:100h
     131/      56 :                     	; init break point ip
     132/      56 : A3 80 01            	mov	[brkip], ax	; clear break point ip
     133/      59 :                     
     134/      59 : B8 40 00            	MOV	AX,FREE_SEG	; set free memory start segment
     135/      5C : A3 76 01            	MOV	[REGDS],AX	; CS=DS=ES=SS
     136/      5F : A3 7A 01            	MOV	[REGES],AX
     137/      62 :                     
     138/      62 :                     	;; Initialize vector
     139/      62 : 33 C0               	XOR	AX,AX
     140/      64 : 8E C0               	MOV	ES,AX
     141/      66 : BE 4A 08            	MOV	SI,INIVEC
     142/      69 : 8B F8               	MOV	DI,AX
     143/      6B : B9 00 02            	MOV	CX,VECSIZ*2
     144/      6E :                     INI0:	
     145/      6E : 2E 8B 04            	MOV	AX,CS:[SI]
     146/      71 : 46                  	INC	SI
     147/      72 : 46                  	INC	SI
     148/      73 : 26 89 05            	MOV	ES:[DI],AX
     149/      76 : 47                  	INC	DI
     150/      77 : 47                  	INC	DI
     151/      78 : 49                  	DEC	CX
     152/      79 :                     ;	JZ	INI2
     153/      79 : 81 FE 5E 08         	CMP	SI,INIVECE
     154/      7D : 75 EF               	JNZ	INI0
     155/      7F :                     
     156/      7F : B8 B7 07            	MOV	AX,INTDMY
     157/      82 : BB 50 7F            	MOV	BX,MON_CSEG
     158/      85 :                     
     159/      85 :                     INI1:
     160/      85 : 26 89 05            	MOV	ES:[DI],AX
     161/      88 : 47                  	INC	DI
     162/      89 : 47                  	INC	DI
     163/      8A : 26 89 1D            	MOV	ES:[DI],BX
     164/      8D : 47                  	INC	DI
     165/      8E : 47                  	INC	DI
     166/      8F : 49                  	DEC	CX
     167/      90 : 49                  	DEC	CX
     168/      91 : 75 F2               	JNZ	INI1
     169/      93 :                     ;INI2:
     170/      93 :                     	; init INT 21H(33)
     171/      93 : BF 84 00            	mov	di, int21hvec
     172/      96 : B8 B6 06            	mov	ax, INTFNC
     173/      99 : 26 89 05            	mov	es:[di],ax
     174/      9C : 47                  	inc	di
     175/      9D : 47                  	inc	di
     176/      9E : 26 89 1D            	mov	es:[di],bx
     177/      A1 :                     	
     178/      A1 :                     ; Check CPU TYPE
     179/      A1 :                     
     180/      A1 : BB FD 07            	mov	bx, IMV20
     181/      A4 : B8 00 01            	MOV	AX,0100H
     182/      A7 : D5 00               	DB	0D5H,00H	; AAD 00H
     183/      A9 : 0A C0               	OR	AL,AL
     184/      AB : 75 03               	JNE	ID_V20		; V20
     185/      AD : BB F6 07            	mov	bx, IM88	; 8088
     186/      B0 :                     ID_V20:
     187/      B0 : 89 1E 5D 01         	MOV	[PSPEC],BX
     188/      B4 :                     
     189/      B4 : BB EA 07            	mov	bx, cpu_msg
     190/      B7 : E8 9C 09            	CALL	MSGOUT
     191/      BA :                     
     192/      BA : 8B 1E 5D 01         	mov	bx, [PSPEC]	; get CPU MSG address
     193/      BE : E8 95 09            	CALL	MSGOUT
     194/      C1 :                     
     195/      C1 : =>TRUE               	if CPM86
     196/      C1 : BB C7 07            	mov	bx, invoke_msg
     197/      C4 : E8 8F 09            	CALL	MSGOUT
     198/      C7 : EA 00 25 40 00      	jmpf	CPM86_CODE:BIOS_ENTRY
     199/      CC :                     
     200/      CC : =>FALSE              	else
     201/      CC :                     
     202/      CC :                     	;; Universal Moniter Opening message
     203/      CC :                     	MOV	BX,OPNMSG
     204/      CC :                     	CALL	MSGOUT
     205/      CC : [195]                	endif
     206/      CC :                     
     207/      CC :                     WSTART:
     208/      CC : B8 30 7F            	mov	ax, MON_DSEG
     209/      CF : 8E D8               	mov	ds, ax
     210/      D1 : 8E D0               	mov	ss, ax
     211/      D3 : BC 00 01            	mov	sp, STACK
     212/      D6 :                     
     213/      D6 : BB 03 08            	MOV	BX,PROMPT
     214/      D9 : E8 7A 09            	CALL	MSGOUT
     215/      DC : E8 43 05            	CALL	GETLIN
     216/      DF : BB 00 01            	MOV	BX,INBUF
     217/      E2 : E8 8C 05            	CALL	SKIPSP
     218/      E5 : E8 93 05            	CALL	UPPER
     219/      E8 : 22 C0               	AND	AL,AL
     220/      EA : 74 E0               	JZ	WSTART
     221/      EC :                     
     222/      EC : 3C 44               	CMP	AL,'D'
     223/      EE : 75 02               	JNE	M00
     224/      F0 : EB 2B               	JMP	DUMP
     225/      F2 :                     M00:	
     226/      F2 : 3C 47               	CMP	AL,'G'
     227/      F4 : 75 03               	JNE	M01
     228/      F6 : E9 41 01            	JMP	GO
     229/      F9 :                     M01:
     230/      F9 : 3C 53               	CMP	AL,'S'
     231/      FB : 75 03               	JNE	M02
     232/      FD : E9 FC 01            	JMP	SETM
     233/     100 :                     
     234/     100 :                     M02:	
     235/     100 : 3C 4C               	CMP	AL,'L'
     236/     102 : 75 03               	JNE	M03
     237/     104 : E9 7F 02            	JMP	LOADH
     238/     107 :                     M03:
     239/     107 :                     
     240/     107 : 3C 52               	CMP	AL,'R'
     241/     109 : 75 03               	JNE	M05
     242/     10B : E9 74 03            	JMP	REG
     243/     10E :                     
     244/     10E :                     M05:
     245/     10E : 3C 54               	CMP	AL,'T'
     246/     110 : 75 03               	JNE	M06
     247/     112 : E9 49 04            	JMP	Trace
     248/     115 :                     
     249/     115 :                     M06:
     250/     115 :                     ERR:
     251/     115 : BB 20 08            	MOV	BX,ERRMSG
     252/     118 : E8 3B 09            	CALL	MSGOUT
     253/     11B : EB AF               	JMP	WSTART
     254/     11D :                     
     255/     11D :                     ;;;
     256/     11D :                     ;;; DUMP memory
     257/     11D :                     ;;;
     258/     11D :                     
     259/     11D :                     DUMP:
     260/     11D : 43                  	INC	BX
     261/     11E : E8 65 05            	CALL	RDHEX
     262/     121 : 0A C9               	OR	CL,CL
     263/     123 : 75 15               	JNZ	DP0
     264/     125 :                     	;; No arg.
     265/     125 : E8 49 05            	CALL	SKIPSP
     266/     128 : 0A C0               	OR	AL,AL
     267/     12A : 75 E9               	JNZ	ERR
     268/     12C :                     
     269/     12C : 8B 16 52 01         	MOV	DX,[DSADDR]
     270/     130 : 81 C2 80 00         	ADD	DX,128
     271/     134 : 89 16 54 01         	MOV	[DEADDR],DX
     272/     138 : EB 40               	JMP	DPM
     273/     13A :                     
     274/     13A :                     	;; 1st arg. found
     275/     13A :                     DP0:
     276/     13A : 8A 07               	MOV	AL,[BX]
     277/     13C : 3C 3A               	CMP	AL,':'
     278/     13E : 75 0C               	JNZ	DP01
     279/     140 : 89 16 50 01         	MOV	[CURSEG],DX
     280/     144 : 43                  	INC	BX
     281/     145 : E8 3E 05            	CALL	RDHEX
     282/     148 : 0A C9               	OR	CL,CL
     283/     14A : 74 C9               	JZ	ERR
     284/     14C :                     DP01:	
     285/     14C : 89 16 52 01         	MOV	[DSADDR],DX
     286/     150 : 8A 07               	MOV	AL,[BX]
     287/     152 : 3C 2C               	CMP	AL,','
     288/     154 : 74 0E               	JZ	DP1
     289/     156 : 0A C0               	OR	AL,AL
     290/     158 : 75 BB               	JNZ	ERR
     291/     15A :                     	;; No 2nd arg.
     292/     15A : 81 C2 80 00         	ADD	DX,128
     293/     15E : 89 16 54 01         	MOV	[DEADDR],DX
     294/     162 : EB 16               	JMP	DPM
     295/     164 :                     DP1:
     296/     164 : 43                  	INC	BX
     297/     165 : E8 1E 05            	CALL	RDHEX
     298/     168 : E8 06 05            	CALL	SKIPSP
     299/     16B : 0A C9               	OR	CL,CL
     300/     16D : 74 A6               	JZ	ERR
     301/     16F : 8A 07               	MOV	AL,[BX]
     302/     171 : 0A C0               	OR	AL,AL
     303/     173 : 75 A0               	JNZ	ERR
     304/     175 : 42                  	INC	DX
     305/     176 : 89 16 54 01         	MOV	[DEADDR],DX
     306/     17A :                     DPM:
     307/     17A :                     	;; DUMP main
     308/     17A : 8E 06 50 01         	MOV	ES,[CURSEG]
     309/     17E : 8B 36 52 01         	MOV	SI,[DSADDR]
     310/     182 : 83 E6 F0            	AND	SI,0FFF0H
     311/     185 : 32 C0               	XOR	AL,AL
     312/     187 : A2 56 01            	MOV	[DSTATE],AL
     313/     18A :                     DPM0:
     314/     18A : E8 23 00            	CALL	DPL
     315/     18D : E8 16 09            	CALL	CONST
     316/     190 : 0A C0               	OR	AL,AL
     317/     192 : 75 12               	JNZ	DPM1
     318/     194 : A0 56 01            	MOV	AL,[DSTATE]
     319/     197 : 3C 02               	CMP	AL,2
     320/     199 : 72 EF               	JC	DPM0
     321/     19B : 8B 1E 54 01         	MOV	BX,[DEADDR]
     322/     19F : 89 1E 52 01         	MOV	[DSADDR],BX
     323/     1A3 : E9 26 FF            	JMP	WSTART
     324/     1A6 :                     DPM1:
     325/     1A6 : 89 36 52 01         	MOV	[DSADDR],SI
     326/     1AA : E8 E2 08            	CALL	CONIN
     327/     1AD : E9 1C FF            	JMP	WSTART
     328/     1B0 :                     
     329/     1B0 :                     DPL:
     330/     1B0 :                     	;; DUMP	line
     331/     1B0 : A1 50 01            	MOV	AX,[CURSEG]
     332/     1B3 : E8 15 04            	CALL	HEXOUT4
     333/     1B6 : B0 3A               	MOV	AL,':'
     334/     1B8 : E8 F3 08            	CALL	CONOUT
     335/     1BB : 8B C6               	MOV	AX,SI
     336/     1BD : E8 0B 04            	CALL	HEXOUT4
     337/     1C0 : BB 28 08            	MOV	BX,DSEP0
     338/     1C3 : E8 90 08            	CALL	MSGOUT
     339/     1C6 : BF 00 01            	MOV	DI,INBUF
     340/     1C9 : B9 10 00            	MOV	CX,16
     341/     1CC :                     DPL0:
     342/     1CC : E8 28 00            	CALL	DPB
     343/     1CF : E2 FB               	LOOP	DPL0
     344/     1D1 :                     
     345/     1D1 : BB 2B 08            	MOV	BX,DSEP1
     346/     1D4 : E8 7F 08            	CALL	MSGOUT
     347/     1D7 :                     
     348/     1D7 : BF 00 01            	MOV	DI,INBUF
     349/     1DA : B9 10 00            	MOV	CX,16
     350/     1DD :                     DPL1:
     351/     1DD : 8A 05               	MOV	AL,[DI]
     352/     1DF : 47                  	INC	DI
     353/     1E0 : 3C 20               	CMP	AL,' '
     354/     1E2 : 72 09               	JC	DPL2
     355/     1E4 : 3C 7F               	CMP	AL,7FH
     356/     1E6 : 73 05               	JNC	DPL2
     357/     1E8 : E8 C3 08            	CALL	CONOUT
     358/     1EB : EB 05               	JMP	DPL3
     359/     1ED :                     DPL2:
     360/     1ED : B0 2E               	MOV	AL,'.'
     361/     1EF : E8 BC 08            	CALL	CONOUT
     362/     1F2 :                     DPL3:
     363/     1F2 : E2 E9               	LOOP	DPL1
     364/     1F4 : E9 21 04            	JMP	CRLF
     365/     1F7 :                     
     366/     1F7 :                     DPB:
     367/     1F7 :                     	;; DUMP byte
     368/     1F7 : B0 20               	MOV	AL,' '
     369/     1F9 : E8 B2 08            	CALL	CONOUT
     370/     1FC : A0 56 01            	MOV	AL,[DSTATE]
     371/     1FF : 0A C0               	OR	AL,AL
     372/     201 : 75 1A               	JNZ	DPB2
     373/     203 :                     	;; State 0
     374/     203 : 3B 36 52 01         	CMP	SI,[DSADDR]
     375/     207 : 74 0F               	JZ	DPB1
     376/     209 :                     DPB0:
     377/     209 :                     	;; Still 0 or 2
     378/     209 : B0 20               	MOV	AL,' '
     379/     20B : 88 05               	MOV	[DI],AL
     380/     20D : E8 9E 08            	CALL	CONOUT
     381/     210 : B0 20               	MOV	AL,' '
     382/     212 : E8 99 08            	CALL	CONOUT
     383/     215 : 46                  	INC	SI
     384/     216 : 47                  	INC	DI
     385/     217 : C3                  	RET
     386/     218 :                     DPB1:
     387/     218 :                     	;; Found start address
     388/     218 : B0 01               	MOV	AL,1
     389/     21A : A2 56 01            	MOV	[DSTATE],AL
     390/     21D :                     DPB2:
     391/     21D : A0 56 01            	MOV	AL,[DSTATE]
     392/     220 : 3C 01               	CMP	AL,1
     393/     222 : 75 E5               	JNZ	DPB0		; state 2
     394/     224 :                     	;; DUMP state 1
     395/     224 : 26 8A 04            	MOV	AL,ES:[SI]
     396/     227 : 88 05               	MOV	[DI],AL
     397/     229 : E8 A6 03            	CALL	HEXOUT2
     398/     22C : 46                  	INC	SI
     399/     22D : 47                  	INC	DI
     400/     22E :                     
     401/     22E : 3B 36 54 01         	CMP	SI,[DEADDR]
     402/     232 : 75 05               	JNZ	DPB3
     403/     234 :                     	;; Found end address
     404/     234 : B0 02               	MOV	AL,2
     405/     236 : A2 56 01            	MOV	[DSTATE],AL
     406/     239 :                     DPB3:
     407/     239 : C3                  	RET
     408/     23A :                     
     409/     23A :                     ;;;
     410/     23A :                     ;;; GO address
     411/     23A :                     ;;; 
     412/     23A :                     
     413/     23A :                     GO:
     414/     23A : 32 C0               	xor 	al, al
     415/     23C : A2 7C 01            	mov	[bflg], al
     416/     23F :                     
     417/     23F : 43                  	INC	BX
     418/     240 : E8 43 04            	CALL	RDHEX
     419/     243 : 0A C9               	OR	CL,CL
     420/     245 : 74 1D               	JZ	G1
     421/     247 : 8A 07               	MOV	AL,[BX]
     422/     249 : 3C 3A               	CMP	AL,':'
     423/     24B : 75 10               	JNE	G0
     424/     24D :                     
     425/     24D : 89 16 74 01         	MOV	[REGCS],DX
     426/     251 : 89 16 7E 01         	MOV	[brkcs],DX
     427/     255 : 43                  	INC	BX
     428/     256 : E8 2D 04            	CALL	RDHEX
     429/     259 : 0A C9               	OR	CL,CL
     430/     25B : 74 19               	JZ	GE
     431/     25D :                     G0:
     432/     25D : 89 16 72 01         	MOV	[REGIP],DX
     433/     261 : E8 0D 04            	CALL	SKIPSP
     434/     264 :                     G1:
     435/     264 : 8A 07               	MOV	AL,[BX]
     436/     266 : 0A C0               	or	al, al
     437/     268 : 74 37               	je	go_go
     438/     26A :                     
     439/     26A : 3C 2C               	CMP	AL,','
     440/     26C : 75 08               	JNZ	GE
     441/     26E :                     
     442/     26E : 43                  	INC	BX
     443/     26F : E8 14 04            	CALL	RDHEX
     444/     272 : 0A C9               	OR	CL,CL
     445/     274 : 75 03               	jnz	g2
     446/     276 :                     GE:
     447/     276 : E9 9C FE            	JMP	ERR
     448/     279 :                     
     449/     279 :                     g2:
     450/     279 : A1 74 01            	MOV	AX,[REGCS]
     451/     27C : A3 7E 01            	MOV	[brkcs],AX
     452/     27F : 8A 07               	MOV	AL,[BX]
     453/     281 : 3C 3A               	CMP	AL,':'
     454/     283 : 75 0C               	JNE	G0_0
     455/     285 :                     
     456/     285 : 89 16 7E 01         	MOV	[brkcs],DX
     457/     289 : 43                  	INC	BX
     458/     28A : E8 F9 03            	CALL	RDHEX
     459/     28D : 0A C9               	OR	CL,CL
     460/     28F : 74 E5               	JZ	GE
     461/     291 :                     
     462/     291 :                     G0_0:
     463/     291 : 89 16 80 01         	MOV	[brkip],DX
     464/     295 : E8 D9 03            	CALL	SKIPSP
     465/     298 : 0A C0               	OR	AL,AL
     466/     29A : 75 DA               	JNZ	GE
     467/     29C :                     
     468/     29C : B0 01               	mov	al, 1
     469/     29E : A2 7C 01            	mov	[bflg], al
     470/     2A1 :                     
     471/     2A1 :                     go_go:
     472/     2A1 : A0 7C 01            	mov	al, [bflg]
     473/     2A4 : 0A C0               	or	al, al
     474/     2A6 : 74 14               	je	go_anywhere
     475/     2A8 :                     
     476/     2A8 :                     ; set break point
     477/     2A8 :                     
     478/     2A8 : A1 7E 01            	mov	ax, [brkcs]
     479/     2AB : 8E C0               	mov	es, ax
     480/     2AD : 8B 36 80 01         	mov	si, [brkip]
     481/     2B1 : 26 8A 04            	mov	al, es:[si]	; get a code at break point
     482/     2B4 : A2 7D 01            	mov	[bp_code], al
     483/     2B7 : B0 CC               	mov	al, 0CCH	; int 03h code
     484/     2B9 : 26 88 04            	mov	es:[si], al	; set break point
     485/     2BC :                     
     486/     2BC :                     go_anywhere:
     487/     2BC : 2E C6 06 00 00 07   	mov	cs:[UREQ_COM], MNI_LEDOFF	; NMI LED off request
     488/     2C2 : E6 00               	out	DUMMY_PORT, al			; make IO/M = 1 then invoke PIC F/W
     489/     2C4 :                     
     490/     2C4 : 8E 16 78 01         	MOV	SS,[REGSS]
     491/     2C8 : 8B 26 6A 01         	MOV	SP,[REGSP]
     492/     2CC :                     	
     493/     2CC : A1 68 01            	MOV	AX,[REGF]
     494/     2CF : 50                  	PUSH	AX
     495/     2D0 : A1 74 01            	MOV	AX,[REGCS]
     496/     2D3 : 50                  	PUSH	AX
     497/     2D4 : A1 72 01            	MOV	AX,[REGIP]
     498/     2D7 : 50                  	PUSH	AX
     499/     2D8 :                     
     500/     2D8 : A1 60 01            	MOV	AX,[REGAX]
     501/     2DB : 8B 1E 62 01         	MOV	BX,[REGBX]
     502/     2DF : 8B 0E 64 01         	MOV	CX,[REGCX]
     503/     2E3 : 8B 16 66 01         	MOV	DX,[REGDX]
     504/     2E7 : 8B 2E 6C 01         	MOV	BP,[REGBP]
     505/     2EB : 8B 36 6E 01         	MOV	SI,[REGSI]
     506/     2EF : 8B 3E 70 01         	MOV	DI,[REGDI]
     507/     2F3 : 8E 06 7A 01         	MOV	ES,[REGES]
     508/     2F7 : 8E 1E 76 01         	MOV	DS,[REGDS]
     509/     2FB : CF                  	IRET
     510/     2FC :                     
     511/     2FC :                     ;;;
     512/     2FC :                     ;;; SET memory
     513/     2FC :                     ;;;
     514/     2FC :                     
     515/     2FC :                     SETM:
     516/     2FC : 43                  	INC	BX
     517/     2FD : E8 86 03            	CALL	RDHEX
     518/     300 : 0A C9               	OR	CL,CL
     519/     302 : 74 1F               	JZ	SM1
     520/     304 : 8A 07               	MOV	AL,[BX]
     521/     306 : 3C 3A               	CMP	AL,':'
     522/     308 : 75 0C               	JNE	SM0
     523/     30A : 89 16 50 01         	MOV	[CURSEG],DX
     524/     30E : 43                  	INC	BX
     525/     30F : E8 74 03            	CALL	RDHEX
     526/     312 : 0A C9               	OR	CL,CL
     527/     314 : 74 6D               	JZ	SME
     528/     316 :                     SM0:
     529/     316 : 89 16 5A 01         	MOV	[SADDR],DX
     530/     31A : E8 54 03            	CALL	SKIPSP
     531/     31D : 8A 07               	MOV	AL,[BX]
     532/     31F : 0A C0               	OR	AL,AL
     533/     321 : 75 60               	JNZ	SME
     534/     323 :                     SM1:
     535/     323 : A1 50 01            	MOV	AX,[CURSEG]
     536/     326 : 8E C0               	MOV	ES,AX
     537/     328 : E8 A0 02            	CALL	HEXOUT4
     538/     32B : B0 3A               	MOV	AL,':'
     539/     32D : E8 7E 07            	CALL	CONOUT
     540/     330 : 8B 36 5A 01         	MOV	SI,[SADDR]
     541/     334 : 8B C6               	MOV	AX,SI
     542/     336 : E8 92 02            	CALL	HEXOUT4
     543/     339 : BB 2B 08            	MOV	BX,DSEP1
     544/     33C : E8 17 07            	CALL	MSGOUT
     545/     33F : 26 8A 04            	MOV	AL,ES:[SI]
     546/     342 : E8 8D 02            	CALL	HEXOUT2
     547/     345 : B0 20               	MOV	AL,' '
     548/     347 : E8 64 07            	CALL	CONOUT
     549/     34A : E8 D5 02            	CALL	GETLIN
     550/     34D : BB 00 01            	MOV	BX,INBUF
     551/     350 : E8 1E 03            	CALL	SKIPSP
     552/     353 : 8A 07               	MOV	AL,[BX]
     553/     355 : 0A C0               	OR	AL,AL
     554/     357 : 75 07               	JNZ	SM2
     555/     359 :                     	;; Empty (Increment address)
     556/     359 : 46                  	INC	SI
     557/     35A : 89 36 5A 01         	MOV	[SADDR],SI
     558/     35E : EB C3               	JMP	SM1
     559/     360 :                     SM2:
     560/     360 : 3C 2D               	CMP	AL,'-'
     561/     362 : 75 07               	JNZ	SM3
     562/     364 :                     	;; '-' (Decrement address)
     563/     364 : 4E                  	DEC	SI
     564/     365 : 89 36 5A 01         	MOV	[SADDR],SI
     565/     369 : EB B8               	JMP	SM1
     566/     36B :                     SM3:
     567/     36B : 3C 2E               	CMP	AL,'.'
     568/     36D : 75 03               	JNZ	SM4
     569/     36F :                     	;; '.' (Quit)
     570/     36F : E9 5A FD            	JMP	WSTART
     571/     372 :                     SM4:
     572/     372 : E8 11 03            	CALL	RDHEX
     573/     375 : 0A C9               	OR	CL,CL
     574/     377 : 74 0A               	JZ	SME
     575/     379 : 26 88 14            	MOV	ES:[SI],DL
     576/     37C : 46                  	INC	SI
     577/     37D : 89 36 5A 01         	MOV	[SADDR],SI
     578/     381 : EB A0               	JMP	SM1
     579/     383 :                     SME:
     580/     383 : E9 8F FD            	JMP	ERR
     581/     386 :                     
     582/     386 :                     ;;;
     583/     386 :                     ;;; LOAD HEX file
     584/     386 :                     ;;;
     585/     386 :                     
     586/     386 :                     LOADH:
     587/     386 : 43                  	INC	BX
     588/     387 : E8 FC 02            	CALL	RDHEX
     589/     38A : 0A C9               	OR	CL,CL
     590/     38C : 74 14               	JZ	LH0
     591/     38E : 8A 07               	MOV	AL,[BX]
     592/     390 : 3C 3A               	CMP	AL,':'
     593/     392 : 75 10               	JNE	LH1
     594/     394 : 89 16 50 01         	MOV	[CURSEG],DX
     595/     398 : 43                  	INC	BX
     596/     399 : E8 EA 02            	CALL	RDHEX
     597/     39C : 0A C9               	OR	CL,CL
     598/     39E : 74 30               	JZ	LHE
     599/     3A0 : EB 02               	JMP	LH1
     600/     3A2 :                     LH0:
     601/     3A2 : 33 D2               	XOR	DX,DX
     602/     3A4 :                     LH1:
     603/     3A4 : 8A 07               	MOV	AL,[BX]
     604/     3A6 : 0A C0               	OR	AL,AL
     605/     3A8 : 75 26               	JNZ	LHE
     606/     3AA : 8B F2               	MOV	SI,DX
     607/     3AC : 8E 06 50 01         	MOV	ES,[CURSEG]
     608/     3B0 :                     
     609/     3B0 :                     LH2:	
     610/     3B0 : B0 2E               	mov	al, '.'
     611/     3B2 : E8 F9 06            	call	CONOUT
     612/     3B5 :                     	
     613/     3B5 : E8 D7 06            	CALL	CONIN
     614/     3B8 : E8 C0 02            	CALL	UPPER
     615/     3BB : 3C 53               	CMP	AL,'S'
     616/     3BD : 74 6B               	JE	LHS0
     617/     3BF : 3C 3A               	CMP	AL,':'
     618/     3C1 : 74 10               	JE	LHI0
     619/     3C3 :                     LH3:
     620/     3C3 :                     	;; Skip to EOL
     621/     3C3 : 3C 0D               	CMP	AL,CR
     622/     3C5 : 74 E9               	JE	LH2
     623/     3C7 : 3C 0A               	CMP	AL,LF
     624/     3C9 : 74 E5               	JE	LH2
     625/     3CB : E8 C1 06            	CALL	CONIN
     626/     3CE : EB F3               	JMP	LH3
     627/     3D0 :                     LHE:
     628/     3D0 : E9 42 FD            	JMP	ERR
     629/     3D3 :                     
     630/     3D3 :                     LHI0:
     631/     3D3 : E8 16 02            	CALL	HEXIN
     632/     3D6 : 8A C8               	MOV	CL,AL		; Checksum
     633/     3D8 : 8A D8               	MOV	BL,AL		; Length
     634/     3DA :                     
     635/     3DA : E8 0F 02            	CALL	HEXIN
     636/     3DD : 8A F0               	MOV	DH,AL		; Address H
     637/     3DF : 02 C8               	ADD	CL,AL		; Checksum
     638/     3E1 :                     
     639/     3E1 : E8 08 02            	CALL	HEXIN
     640/     3E4 : 8A D0               	MOV	DL,AL		; Address L
     641/     3E6 : 02 C8               	ADD	CL,AL		; Checksum
     642/     3E8 :                     
     643/     3E8 : 8B FA               	MOV	DI,DX
     644/     3EA : 03 FE               	ADD	DI,SI		; Add offset
     645/     3EC :                     
     646/     3EC : E8 FD 01            	CALL	HEXIN
     647/     3EF : A2 5F 01            	MOV	[RECTYP],AL	; Record Type
     648/     3F2 : 02 C8               	ADD	CL,AL		; Checksum
     649/     3F4 :                     
     650/     3F4 : 0A DB               	OR	BL,BL		; Check length
     651/     3F6 : 74 15               	JZ	LHI3
     652/     3F8 :                     LHI1:
     653/     3F8 : E8 F1 01            	CALL	HEXIN
     654/     3FB : 02 C8               	ADD	CL,AL		; Checksum
     655/     3FD :                     
     656/     3FD : 8A 3E 5F 01         	MOV	BH,[RECTYP]
     657/     401 : 0A FF               	OR	BH,BH
     658/     403 : 75 04               	JNZ	LHI2
     659/     405 :                     
     660/     405 : 26 88 05            	MOV	ES:[DI],AL
     661/     408 : 47                  	INC	DI
     662/     409 :                     LHI2:
     663/     409 : FE CB               	DEC	BL
     664/     40B : 75 EB               	JNZ	LHI1
     665/     40D :                     LHI3:
     666/     40D : E8 DC 01            	CALL	HEXIN
     667/     410 : 02 C1               	ADD	AL,CL
     668/     412 : 75 0D               	JNZ	LHIE		; Checksum error
     669/     414 : A0 5F 01            	MOV	AL,[RECTYP]
     670/     417 : 0A C0               	OR	AL,AL
     671/     419 : 74 A8               	JZ	LH3
     672/     41B :                     
     673/     41B :                     LHSR:
     674/     41B : E8 FA 01            	call	CRLF
     675/     41E : E9 AB FC            	JMP	WSTART
     676/     421 :                     LHIE:
     677/     421 : BB 06 08            	MOV	BX,IHEMSG
     678/     424 : E8 2F 06            	CALL	MSGOUT
     679/     427 : E9 A2 FC            	JMP	WSTART
     680/     42A :                     
     681/     42A :                     LHS0:
     682/     42A : E8 62 06            	CALL	CONIN
     683/     42D : A2 5F 01            	MOV	[RECTYP],AL
     684/     430 :                     
     685/     430 : E8 B9 01            	CALL	HEXIN
     686/     433 : 8A D8               	MOV	BL,AL		; Length+3
     687/     435 : 8A C8               	MOV	CL,AL		; Checksum
     688/     437 :                     
     689/     437 : E8 B2 01            	CALL	HEXIN
     690/     43A : 8A F0               	MOV	DH,AL		; Address H
     691/     43C : 02 C8               	ADD	CL,AL		; Checksum
     692/     43E :                     	
     693/     43E : E8 AB 01            	CALL	HEXIN
     694/     441 : 8A D0               	MOV	DL,AL		; Address L
     695/     443 : 02 C8               	ADD	CL,AL		; Checksum
     696/     445 :                     
     697/     445 : 8B FA               	MOV	DI,DX
     698/     447 : 03 FE               	ADD	DI,SI		; Add offset
     699/     449 :                     
     700/     449 : 80 EB 03            	SUB	BL,3
     701/     44C : 72 2B               	JC	LHSE		; Length error
     702/     44E : 74 16               	JZ	LHS3
     703/     450 :                     LHS1:
     704/     450 : E8 99 01            	CALL	HEXIN
     705/     453 : 02 C8               	ADD	CL,AL		; Checksum
     706/     455 :                     
     707/     455 : 8A 3E 5F 01         	MOV	BH,[RECTYP]
     708/     459 : 80 FF 31            	CMP	BH,'1'
     709/     45C : 75 04               	JNZ	LHS2
     710/     45E :                     
     711/     45E : 26 88 05            	MOV	ES:[DI],AL
     712/     461 : 47                  	INC	DI
     713/     462 :                     LHS2:
     714/     462 : FE CB               	DEC	BL
     715/     464 : 75 EA               	JNZ	LHS1
     716/     466 :                     LHS3:
     717/     466 : E8 83 01            	CALL	HEXIN
     718/     469 : 02 C1               	ADD	AL,CL
     719/     46B : 3C FF               	CMP	AL,0FFH
     720/     46D : 75 0A               	JNE	LHSE		; Checksum error
     721/     46F :                     
     722/     46F : A0 5F 01            	MOV	AL,[RECTYP]
     723/     472 : 3C 39               	CMP	AL,'9'
     724/     474 : 74 A5               	JZ	LHSR
     725/     476 : E9 4A FF            	JMP	LH3
     726/     479 :                     LHSE:
     727/     479 : BB 13 08            	MOV	BX,SHEMSG
     728/     47C : E8 D7 05            	CALL	MSGOUT
     729/     47F : E9 4A FC            	JMP	WSTART
     730/     482 :                     
     731/     482 :                     ;;;
     732/     482 :                     ;;; Register
     733/     482 :                     ;;; 
     734/     482 :                     REG:
     735/     482 : 43                  	INC	BX
     736/     483 : E8 EB 01            	CALL	SKIPSP
     737/     486 : E8 F2 01            	CALL	UPPER
     738/     489 : 0A C0               	OR	AL,AL
     739/     48B : 75 06               	JNE	RG0
     740/     48D : E8 7F 00            	CALL	RDUMP
     741/     490 : E9 39 FC            	JMP	WSTART
     742/     493 :                     RG0:
     743/     493 : BE 2F 09            	MOV	SI,RNTAB
     744/     496 :                     RG1:
     745/     496 : 2E 3A 04            	CMP	AL,CS:[SI]
     746/     499 : 74 0D               	JE	RG2		; Character match
     747/     49B : 2E 8A 4C 01         	MOV	CL,CS:1[SI]
     748/     49F : 0A C9               	OR	CL,CL
     749/     4A1 : 74 69               	JE	RGE
     750/     4A3 : 83 C6 06            	ADD	SI,6
     751/     4A6 : EB EE               	JMP	RG1
     752/     4A8 :                     RG2:
     753/     4A8 : 2E 8A 44 01         	MOV	AL,CS:1[SI]
     754/     4AC : 3C 0F               	CMP	AL,0FH
     755/     4AE : 75 0C               	JNE	RG3
     756/     4B0 :                     	;; Next table
     757/     4B0 : 2E 8B 74 02         	MOV	SI,CS:2[SI]
     758/     4B4 : 43                  	INC	BX
     759/     4B5 : 8A 07               	MOV	AL,[BX]
     760/     4B7 : E8 C1 01            	CALL	UPPER
     761/     4BA : EB DA               	JMP	RG1
     762/     4BC :                     RG3:	
     763/     4BC : 0A C0               	OR	AL,AL		; Found end mark
     764/     4BE : 74 4C               	JE	RGE
     765/     4C0 :                     
     766/     4C0 : 2E 8A 4C 01         	MOV	CL,CS:1[SI]
     767/     4C4 : 2E 8B 5C 04         	MOV	BX,CS:4[SI]
     768/     4C8 : E8 8B 05            	CALL	MSGOUT
     769/     4CB : B0 3D               	MOV	AL,'='
     770/     4CD : E8 DE 05            	CALL	CONOUT
     771/     4D0 : 2E 8B 5C 02         	MOV	BX,CS:2[SI]
     772/     4D4 : 80 E1 07            	AND	CL,07H
     773/     4D7 : 53                  	PUSH	BX
     774/     4D8 : 51                  	PUSH	CX
     775/     4D9 : 80 F9 01            	CMP	CL,1
     776/     4DC : 75 07               	JNE	RG4
     777/     4DE :                     	;; 8 bit register
     778/     4DE : 8A 07               	MOV	AL,[BX]
     779/     4E0 : E8 EF 00            	CALL	HEXOUT2
     780/     4E3 : EB 05               	JMP	RG5
     781/     4E5 :                     RG4:
     782/     4E5 :                     	;; 16 bit register
     783/     4E5 : 8B 07               	MOV	AX,[BX]
     784/     4E7 : E8 E1 00            	CALL	HEXOUT4
     785/     4EA :                     RG5:
     786/     4EA : B0 20               	MOV	AL,' '
     787/     4EC : E8 BF 05            	CALL	CONOUT
     788/     4EF : E8 30 01            	CALL	GETLIN
     789/     4F2 : BB 00 01            	MOV	BX,INBUF
     790/     4F5 : E8 8E 01            	CALL	RDHEX
     791/     4F8 : 0A C9               	OR	CL,CL
     792/     4FA : 74 0D               	JE	RGR
     793/     4FC : 59                  	POP	CX
     794/     4FD : 5B                  	POP	BX
     795/     4FE : 80 F9 01            	CMP	CL,1
     796/     501 : 75 04               	JNE	RG6
     797/     503 :                     	;; 8 bit register
     798/     503 : 88 17               	MOV	[BX],DL
     799/     505 : EB 02               	JMP	RG7
     800/     507 :                     RG6:
     801/     507 :                     	;; 16 bit register
     802/     507 : 89 17               	MOV	[BX],DX
     803/     509 :                     RG7:
     804/     509 :                     RGR:
     805/     509 : E9 C0 FB            	JMP	WSTART
     806/     50C :                     RGE:
     807/     50C : E9 06 FC            	JMP	ERR
     808/     50F :                     	
     809/     50F :                     RDUMP:
     810/     50F : BE 97 08            	MOV	SI,RDTAB
     811/     512 :                     RD0:	
     812/     512 : 2E 8B 1C            	MOV	BX,CS:[SI]
     813/     515 : 0B DB               	OR	BX,BX
     814/     517 : 74 11               	JZ	RD1
     815/     519 : E8 3A 05            	CALL	MSGOUT
     816/     51C : 46                  	INC	SI
     817/     51D : 46                  	INC	SI
     818/     51E : 2E 8B 1C            	MOV	BX,CS:[SI]
     819/     521 : 8B 07               	MOV	AX,[BX]
     820/     523 : E8 A5 00            	CALL	HEXOUT4
     821/     526 : 46                  	INC	SI
     822/     527 : 46                  	INC	SI
     823/     528 : EB E8               	JMP	RD0
     824/     52A :                     RD1:	
     825/     52A :                     ; Flag bit image
     826/     52A :                     
     827/     52A : BB 19 09            	mov	bx, FLGB
     828/     52D : E8 26 05            	CALL	MSGOUT		;" FLb="
     829/     530 :                     
     830/     530 : BF 82 01            	mov	di, F_bit
     831/     533 : BB 1F 09            	mov	bx, Fbiton
     832/     536 : B1 10               	mov	cl, F_bitSize
     833/     538 : A1 68 01            	mov	ax, [REGF]
     834/     53B : 25 D5 0F            	and	ax, f_msk_bit
     835/     53E :                     
     836/     53E :                     fb_loop:
     837/     53E : D1 E0               	shl	ax, 1
     838/     540 : 72 05               	jc	rdf1
     839/     542 :                     
     840/     542 : C6 05 2E            	mov	byte ptr [di], '.'
     841/     545 : EB 05               	jmp	rdf2
     842/     547 :                     
     843/     547 :                     rdf1:
     844/     547 : 2E 8A 2F            	mov	ch, cs:[bx]
     845/     54A : 88 2D               	mov	[di], ch
     846/     54C :                     rdf2:
     847/     54C : 43                  	inc	bx
     848/     54D : 47                  	inc	di
     849/     54E : FE C9               	dec	cl
     850/     550 : 75 EC               	jnz	fb_loop
     851/     552 :                     
     852/     552 : C6 05 00            	mov	byte ptr [di],0
     853/     555 : BB 82 01            	mov	bx, F_bit
     854/     558 : E8 F3 04            	CALL	STROUT		;"....ODITSZ.A.P.C"
     855/     55B :                     	
     856/     55B : E9 BA 00            	JMP	CRLF
     857/     55E :                     	
     858/     55E :                     ;;;
     859/     55E :                     ;;; T address
     860/     55E :                     ;;; 
     861/     55E :                     
     862/     55E :                     Trace:
     863/     55E : 43                  	INC	BX
     864/     55F : E8 24 01            	CALL	RDHEX
     865/     562 : 0A C9               	OR	CL,CL
     866/     564 : 74 19               	JZ	T1
     867/     566 : 8A 07               	MOV	AL,[BX]
     868/     568 : 3C 3A               	CMP	AL,':'
     869/     56A : 75 0C               	JNE	T0
     870/     56C :                     
     871/     56C : 89 16 74 01         	MOV	[REGCS],DX
     872/     570 : 43                  	INC	BX
     873/     571 : E8 12 01            	CALL	RDHEX
     874/     574 : 0A C9               	OR	CL,CL
     875/     576 : 74 0D               	JZ	TE
     876/     578 :                     T0:
     877/     578 : 89 16 72 01         	MOV	[REGIP],DX
     878/     57C : E8 F2 00            	CALL	SKIPSP
     879/     57F :                     T1:
     880/     57F : 8A 07               	MOV	AL,[BX]
     881/     581 : 0A C0               	or	al, al
     882/     583 : 74 03               	je	To_go
     883/     585 :                     
     884/     585 :                     TE:
     885/     585 : E9 8D FB            	JMP	ERR
     886/     588 :                     
     887/     588 :                     To_go:
     888/     588 : 2E C6 06 00 00 07   	mov	cs:[UREQ_COM], MNI_LEDOFF	; NMI LED off request
     889/     58E : E6 00               	out	DUMMY_PORT, al			; make IO/M = 1 then invoke PIC F/W
     890/     590 :                     
     891/     590 : 8E 16 78 01         	MOV	SS,[REGSS]
     892/     594 : 8B 26 6A 01         	MOV	SP,[REGSP]
     893/     598 :                     	
     894/     598 : A1 68 01            	MOV	AX,[REGF]
     895/     59B : 0D 00 01            	or	ax, Tbit_ON_
     896/     59E :                     
     897/     59E : 50                  	PUSH	AX
     898/     59F : A1 74 01            	MOV	AX,[REGCS]
     899/     5A2 : 50                  	PUSH	AX
     900/     5A3 : A1 72 01            	MOV	AX,[REGIP]
     901/     5A6 : 50                  	PUSH	AX
     902/     5A7 :                     
     903/     5A7 : A1 60 01            	MOV	AX,[REGAX]
     904/     5AA : 8B 1E 62 01         	MOV	BX,[REGBX]
     905/     5AE : 8B 0E 64 01         	MOV	CX,[REGCX]
     906/     5B2 : 8B 16 66 01         	MOV	DX,[REGDX]
     907/     5B6 : 8B 2E 6C 01         	MOV	BP,[REGBP]
     908/     5BA : 8B 36 6E 01         	MOV	SI,[REGSI]
     909/     5BE : 8B 3E 70 01         	MOV	DI,[REGDI]
     910/     5C2 : 8E 06 7A 01         	MOV	ES,[REGES]
     911/     5C6 : 8E 1E 76 01         	MOV	DS,[REGDS]
     912/     5CA : CF                  	IRET
     913/     5CB :                     
     914/     5CB :                     ;;;
     915/     5CB :                     ;;; Other support routines
     916/     5CB :                     ;;;
     917/     5CB :                     HEXOUT4:
     918/     5CB : 50                  	PUSH	AX
     919/     5CC : 8A C4               	MOV	AL,AH
     920/     5CE : E8 01 00            	CALL	HEXOUT2
     921/     5D1 : 58                  	POP	AX
     922/     5D2 :                     HEXOUT2:
     923/     5D2 : 50                  	PUSH	AX
     924/     5D3 : D0 E8               	SHR	AL,1
     925/     5D5 : D0 E8               	SHR	AL,1
     926/     5D7 : D0 E8               	SHR	AL,1
     927/     5D9 : D0 E8               	SHR	AL,1
     928/     5DB : E8 01 00            	CALL	HEXOUT1
     929/     5DE : 58                  	POP	AX
     930/     5DF :                     HEXOUT1:
     931/     5DF : 24 0F               	AND	AL,0FH
     932/     5E1 : 04 30               	ADD	AL,'0'
     933/     5E3 : 3C 3A               	CMP	AL,'9'+1
     934/     5E5 : 72 02               	JC	HO10
     935/     5E7 : 04 07               	ADD	AL,'A'-'9'-1
     936/     5E9 :                     HO10:
     937/     5E9 : E9 C2 04            	JMP	CONOUT
     938/     5EC :                     
     939/     5EC :                     HEXIN:
     940/     5EC : 32 C0               	XOR	AL,AL
     941/     5EE : E8 08 00            	CALL	HI0
     942/     5F1 : D0 E0               	SHL	AL,1
     943/     5F3 : D0 E0               	SHL	AL,1
     944/     5F5 : D0 E0               	SHL	AL,1
     945/     5F7 : D0 E0               	SHL	AL,1
     946/     5F9 :                     HI0:
     947/     5F9 : 8A E8               	MOV	CH,AL
     948/     5FB : E8 91 04            	CALL	CONIN
     949/     5FE : E8 7A 00            	CALL	UPPER
     950/     601 : 3C 30               	CMP	AL,'0'
     951/     603 : 72 12               	JC	HIR
     952/     605 : 3C 3A               	CMP	AL,'9'+1
     953/     607 : 72 0A               	JC	HI1
     954/     609 : 3C 41               	CMP	AL,'A'
     955/     60B : 72 0A               	JC	HIR
     956/     60D : 3C 47               	CMP	AL,'F'+1
     957/     60F : 73 06               	JNC	HIR
     958/     611 : 2C 07               	SUB	AL,'A'-'9'-1
     959/     613 :                     HI1:
     960/     613 : 2C 30               	SUB	AL,'0'
     961/     615 : 0A C5               	OR	AL,CH
     962/     617 :                     HIR:
     963/     617 : C3                  	RET
     964/     618 :                     
     965/     618 :                     CRLF:
     966/     618 : B0 0D               	MOV	AL,CR
     967/     61A : E8 91 04            	CALL	CONOUT
     968/     61D : B0 0A               	MOV	AL,LF
     969/     61F : E9 8C 04            	JMP	CONOUT
     970/     622 :                     
     971/     622 :                     GETLIN:
     972/     622 : BB 00 01            	MOV	BX,INBUF
     973/     625 : 32 C9               	XOR	CL,CL
     974/     627 :                     GL0:
     975/     627 : E8 65 04            	CALL	CONIN
     976/     62A : 3C 0D               	CMP	AL,CR
     977/     62C : 74 3B               	JZ	GLE
     978/     62E : 3C 0A               	CMP	AL,LF
     979/     630 : 74 37               	JZ	GLE
     980/     632 : 3C 08               	CMP	AL,BS
     981/     634 : 74 1B               	JZ	GLB
     982/     636 : 3C 7F               	CMP	AL,DEL
     983/     638 : 74 17               	JZ	GLB
     984/     63A : 3C 20               	CMP	AL,' '
     985/     63C : 72 E9               	JC	GL0
     986/     63E : 3C 80               	CMP	AL,80H
     987/     640 : 73 E5               	JNC	GL0
     988/     642 : 80 F9 4F            	CMP	CL,BUFLEN-1
     989/     645 : 73 E0               	JNC	GL0		; Too long
     990/     647 : 88 07               	MOV	[BX],AL
     991/     649 : E8 62 04            	CALL	CONOUT
     992/     64C : 43                  	INC	BX
     993/     64D : FE C1               	INC	CL
     994/     64F : EB D6               	JMP	GL0
     995/     651 :                     GLB:
     996/     651 : 22 C9               	AND	CL,CL
     997/     653 : 74 D2               	JZ	GL0
     998/     655 : 4B                  	DEC	BX
     999/     656 : FE C9               	DEC	CL
    1000/     658 : B0 08               	MOV	AL,BS
    1001/     65A : E8 51 04            	CALL	CONOUT
    1002/     65D : B0 20               	MOV	AL,' '
    1003/     65F : E8 4C 04            	CALL	CONOUT
    1004/     662 : B0 08               	MOV	AL,BS
    1005/     664 : E8 47 04            	CALL	CONOUT
    1006/     667 : EB BE               	JMP	GL0
    1007/     669 :                     GLE:
    1008/     669 : E8 AC FF            	CALL	CRLF
    1009/     66C : B0 00               	MOV	AL,00H
    1010/     66E : 88 07               	MOV	[BX],AL
    1011/     670 : C3                  	RET
    1012/     671 :                     	
    1013/     671 :                     SKIPSP:
    1014/     671 : 8A 07               	MOV	AL,[BX]
    1015/     673 : 3C 20               	CMP	AL,' '
    1016/     675 : 75 03               	JNE	SSR
    1017/     677 : 43                  	INC	BX
    1018/     678 : EB F7               	JMP	SKIPSP
    1019/     67A :                     SSR:
    1020/     67A : C3                  	RET
    1021/     67B :                     
    1022/     67B :                     UPPER:
    1023/     67B : 3C 61               	CMP	AL,'a'
    1024/     67D : 72 06               	JC	UPR
    1025/     67F : 3C 7B               	CMP	AL,'z'+1
    1026/     681 : 73 02               	JNC	UPR
    1027/     683 : 04 E0               	ADD	AL,'A'-'a'
    1028/     685 :                     UPR:
    1029/     685 : C3                  	RET
    1030/     686 :                     
    1031/     686 :                     RDHEX:
    1032/     686 : E8 E8 FF            	CALL	SKIPSP
    1033/     689 : 32 C9               	XOR	CL,CL
    1034/     68B : 33 D2               	XOR	DX,DX
    1035/     68D :                     RH0:
    1036/     68D : 8A 07               	MOV	AL,[BX]
    1037/     68F : E8 E9 FF            	CALL	UPPER
    1038/     692 : 3C 30               	CMP	AL,'0'
    1039/     694 : 72 1F               	JC	RHE
    1040/     696 : 3C 3A               	CMP	AL,'9'+1
    1041/     698 : 72 0A               	JC	RH1
    1042/     69A : 3C 41               	CMP	AL,'A'
    1043/     69C : 72 17               	JC	RHE
    1044/     69E : 3C 47               	CMP	AL,'F'+1
    1045/     6A0 : 73 13               	JNC	RHE
    1046/     6A2 : 2C 07               	SUB	AL,'A'-'9'-1
    1047/     6A4 :                     RH1:
    1048/     6A4 : 2C 30               	SUB	AL,'0'
    1049/     6A6 : D1 E2               	SHL	DX,1
    1050/     6A8 : D1 E2               	SHL	DX,1
    1051/     6AA : D1 E2               	SHL	DX,1
    1052/     6AC : D1 E2               	SHL	DX,1
    1053/     6AE : 0A D0               	OR	DL,AL
    1054/     6B0 : 43                  	INC	BX
    1055/     6B1 : FE C1               	INC	CL
    1056/     6B3 : EB D8               	JMP	RH0
    1057/     6B5 :                     RHE:
    1058/     6B5 : C3                  	RET
    1059/     6B6 :                     
    1060/     6B6 :                     ;-----------------------
    1061/     6B6 :                     ; INT 21h function call 
    1062/     6B6 :                     ;-----------------------
    1063/     6B6 :                     INTFNC:
    1064/     6B6 :                     	; get a charactor : AH = 7
    1065/     6B6 :                     	; return AL : charactor
    1066/     6B6 : 80 FC 07            	cmp	ah, 7
    1067/     6B9 : 75 04               	jnz	nfnc1
    1068/     6BB : E8 D1 03            	call	CONIN
    1069/     6BE : CF                  	iret
    1070/     6BF :                     nfnc1:
    1071/     6BF :                     	; put a charactor : AH = 2
    1072/     6BF :                     	; input : DL : charactor
    1073/     6BF : 80 FC 02            	cmp	ah, 2
    1074/     6C2 : 75 06               	jnz	nfnc2		; no support function
    1075/     6C4 : 8A C2               	mov	al, dl
    1076/     6C6 : E8 E5 03            	call	CONOUT
    1077/     6C9 : CF                  	iret
    1078/     6CA :                     
    1079/     6CA :                     nfnc2:
    1080/     6CA :                     	; check key status : AH = 0BH
    1081/     6CA :                     	; OUTPUT : AL : 0     ( key is not exist )
    1082/     6CA :                     	;             : 0FFH  ( key is exist )
    1083/     6CA : 80 FC 0B            	cmp	ah, 0BH
    1084/     6CD : 75 08               	jnz	nfnc3		; no support function
    1085/     6CF : E8 D4 03            	call	CONST
    1086/     6D2 : 74 02               	jz	nfnc4
    1087/     6D4 : B0 FF               	mov	al, 0FFH
    1088/     6D6 :                     nfnc4:
    1089/     6D6 : CF                  	iret
    1090/     6D7 :                     	
    1091/     6D7 :                     nfnc3:
    1092/     6D7 : 80 FC 00            	cmp	ah, 0
    1093/     6DA : 75 FA               	jnz	nfnc4
    1094/     6DC :                     
    1095/     6DC : B8 30 7F            	MOV	AX,MON_DSEG
    1096/     6DF : 8E D8               	MOV	DS,AX
    1097/     6E1 : 8E D0               	MOV	SS,AX
    1098/     6E3 : BC 00 01            	MOV	SP,STACK
    1099/     6E6 : E9 B0 00            	jmp	chk_bpt
    1100/     6E9 :                     
    1101/     6E9 :                     ;;;
    1102/     6E9 :                     ;;; Interrupt Handler
    1103/     6E9 :                     ;;;
    1104/     6E9 :                     
    1105/     6E9 :                     	;; Divide error (INT 00H)
    1106/     6E9 :                     INTDIV:
    1107/     6E9 : 50                  	PUSH	AX
    1108/     6EA : 1E                  	PUSH	DS
    1109/     6EB : B8 30 7F            	MOV	AX,MON_DSEG
    1110/     6EE : 8E D8               	MOV	DS,AX
    1111/     6F0 : 89 1E 62 01         	MOV	[REGBX],BX
    1112/     6F4 : 89 0E 64 01         	MOV	[REGCX],CX
    1113/     6F8 : BB 5E 08            	MOV	BX,DIVMSG
    1114/     6FB : 33 C9               	XOR	CX,CX		; IP adjustment
    1115/     6FD : EB 57               	JMP	INT0
    1116/     6FF :                     	
    1117/     6FF :                     	;; Single step (INT 01H)
    1118/     6FF :                     INTSTP:
    1119/     6FF : 50                  	PUSH	AX
    1120/     700 : 1E                  	PUSH	DS
    1121/     701 : B8 30 7F            	MOV	AX,MON_DSEG
    1122/     704 : 8E D8               	MOV	DS,AX
    1123/     706 : 89 1E 62 01         	MOV	[REGBX],BX
    1124/     70A : 89 0E 64 01         	MOV	[REGCX],CX
    1125/     70E : BB 6F 08            	MOV	BX,STPMSG
    1126/     711 : 33 C9               	XOR	CX,CX		; IP adjustment
    1127/     713 : EB 41               	JMP	INT0
    1128/     715 :                     	
    1129/     715 :                     	;; NMI (INT 02H)
    1130/     715 :                     INTNMI:
    1131/     715 : 50                  	PUSH	AX
    1132/     716 : 1E                  	PUSH	DS
    1133/     717 : B8 30 7F            	MOV	AX,MON_DSEG
    1134/     71A : 8E D8               	MOV	DS,AX
    1135/     71C : 89 1E 62 01         	MOV	[REGBX],BX
    1136/     720 : 89 0E 64 01         	MOV	[REGCX],CX
    1137/     724 : BB 78 08            	MOV	BX,NMIMSG
    1138/     727 : 33 C9               	XOR	CX,CX		; IP adjustment
    1139/     729 : EB 2B               	JMP	INT0
    1140/     72B :                     	
    1141/     72B :                     	;; Break (INT 03H)
    1142/     72B :                     INTBRK:
    1143/     72B : 50                  	PUSH	AX
    1144/     72C : 1E                  	PUSH	DS
    1145/     72D : B8 30 7F            	MOV	AX,MON_DSEG
    1146/     730 : 8E D8               	MOV	DS,AX
    1147/     732 : 89 1E 62 01         	MOV	[REGBX],BX
    1148/     736 : 89 0E 64 01         	MOV	[REGCX],CX
    1149/     73A : BB 80 08            	MOV	BX,BRKMSG
    1150/     73D : B9 01 00            	MOV	CX,1		; IP adjustment
    1151/     740 : EB 14               	JMP	INT0
    1152/     742 :                     	
    1153/     742 :                     	;; Overflow (INT 04H)
    1154/     742 :                     INTOVF:
    1155/     742 : 50                  	PUSH	AX
    1156/     743 : 1E                  	PUSH	DS
    1157/     744 : B8 30 7F            	MOV	AX,MON_DSEG
    1158/     747 : 8E D8               	MOV	DS,AX
    1159/     749 : 89 1E 62 01         	MOV	[REGBX],BX
    1160/     74D : 89 0E 64 01         	MOV	[REGCX],CX
    1161/     751 : BB 8A 08            	MOV	BX,OVFMSG
    1162/     754 : 33 C9               	XOR	CX,CX		; IP adjustment
    1163/     756 :                     INT0:
    1164/     756 : 58                  	POP	AX
    1165/     757 : A3 76 01            	MOV	[REGDS],AX
    1166/     75A : 58                  	POP	AX
    1167/     75B : A3 60 01            	MOV	[REGAX],AX
    1168/     75E : 89 16 66 01         	MOV	[REGDX],DX
    1169/     762 :                     
    1170/     762 : 89 2E 6C 01         	MOV	[REGBP],BP
    1171/     766 : 89 36 6E 01         	MOV	[REGSI],SI
    1172/     76A : 89 3E 70 01         	MOV	[REGDI],DI
    1173/     76E : 8C 06 7A 01         	MOV	[REGES],ES
    1174/     772 :                     
    1175/     772 : 58                  	POP	AX
    1176/     773 : 2B C1               	SUB	AX,CX
    1177/     775 : A3 72 01            	MOV	[REGIP],AX
    1178/     778 : 58                  	POP	AX
    1179/     779 : A3 74 01            	MOV	[REGCS],AX
    1180/     77C : 58                  	POP	AX
    1181/     77D : 25 D5 0E            	and	ax,Tbit_OFF	; trace mode off
    1182/     780 :                     
    1183/     780 : A3 68 01            	MOV	[REGF],AX
    1184/     783 :                     
    1185/     783 : 89 26 6A 01         	MOV	[REGSP],SP
    1186/     787 : 8C 16 78 01         	MOV	[REGSS],SS
    1187/     78B :                     
    1188/     78B : B8 30 7F            	mov	ax, MON_DSEG
    1189/     78E : 8E D0               	mov	ss, ax
    1190/     790 : BC 00 01            	mov	sp, STACK
    1191/     793 : E8 C0 02            	CALL	MSGOUT
    1192/     796 : E8 76 FD            	CALL	RDUMP
    1193/     799 :                     
    1194/     799 :                     ; check break point
    1195/     799 :                     
    1196/     799 :                     chk_bpt:
    1197/     799 : A0 7C 01            	mov	al, [bflg]
    1198/     79C : 0A C0               	or	al, al
    1199/     79E : 74 14               	je	nobrkp
    1200/     7A0 :                     
    1201/     7A0 :                     ; restore a original code at break point
    1202/     7A0 :                     
    1203/     7A0 : A1 7E 01            	mov	ax, [brkcs]
    1204/     7A3 : 8E C0               	mov	es, ax
    1205/     7A5 : 8B 36 80 01         	mov	si, [brkip]
    1206/     7A9 : A0 7D 01            	mov	al, [bp_code]
    1207/     7AC : 26 88 04            	mov	es:[si], al	; restore a original code
    1208/     7AF : 32 C0               	xor	al, al
    1209/     7B1 : A2 7C 01            	mov	[bflg], al	; clear break flag
    1210/     7B4 :                     
    1211/     7B4 :                     nobrkp:
    1212/     7B4 : E9 15 F9            	JMP	WSTART
    1213/     7B7 :                     
    1214/     7B7 :                     	;; Dummy
    1215/     7B7 :                     INTDMY:
    1216/     7B7 :                     ;	IRET
    1217/     7B7 :                     
    1218/     7B7 : 35 40 00            	xor	ax,CPM86_CODE
    1219/     7BA : 8E D8               	mov	ds, ax
    1220/     7BC : 8E C0               	mov	es, ax
    1221/     7BE : 33 C0               	xor	ax, ax
    1222/     7C0 : 8B C8               	mov	cx,ax
    1223/     7C2 : EA 03 25 40 00      	jmpf	CPM86_CODE:WORM_ENTRY
    1224/     7C7 :                     
    1225/     7C7 : =>TRUE               	if CPM86
    1226/     7C7 :                     invoke_msg:
    1227/     7C7 : 4E 6F 77 20 69 6E   	db	"Now invoking Operating System...",CR,LF,0
              7CD : 76 6F 6B 69 6E 67 
              7D3 : 20 4F 70 65 72 61 
              7D9 : 74 69 6E 67 20 53 
              7DF : 79 73 74 65 6D 2E 
              7E5 : 2E 2E 0D 0A 00    
    1228/     7EA : =>FALSE              	else
    1229/     7EA :                     OPNMSG:
    1230/     7EA :                     	DB	CR,LF,"Universal Monitor 8088/V20 Edition",CR,LF, 00H
    1231/     7EA : [1225]               	endif
    1232/     7EA :                     
    1233/     7EA :                     cpu_msg:
    1234/     7EA : 43 50 55 20 54 59   	db	"CPU TYPE : ", 00h
              7F0 : 50 45 20 3A 20 00 
    1235/     7F6 : 38 30 38 38 0D 0A   IM88:	DB	"8088",CR,LF,00H
              7FC : 00                
    1236/     7FD : 56 32 30 0D 0A 00   IMV20:	DB	"V20",CR,LF,00H
    1237/     803 :                     
    1238/     803 :                     PROMPT:
    1239/     803 : 5D 20 00            	DB	"] ",00H
    1240/     806 :                     
    1241/     806 :                     IHEMSG:
    1242/     806 : 45 72 72 6F 72 20   	DB	"Error ihex",CR,LF,00H
              80C : 69 68 65 78 0D 0A 
              812 : 00                
    1243/     813 :                     SHEMSG:
    1244/     813 : 45 72 72 6F 72 20   	DB	"Error srec",CR,LF,00H
              819 : 73 72 65 63 0D 0A 
              81F : 00                
    1245/     820 :                     ERRMSG:
    1246/     820 : 45 72 72 6F 72 0D   	DB	"Error",CR,LF,00H
              826 : 0A 00             
    1247/     828 :                     
    1248/     828 :                     DSEP0:
    1249/     828 : 20 3A 00            	DB	" :",00H
    1250/     82B :                     DSEP1:
    1251/     82B : 20 3A 20 00         	DB	" : ",00H
    1252/     82F :                     IHEXER:
    1253/     82F : 3A 30 30 30 30 30           DB	":00000001FF",CR,LF,00H
              835 : 30 30 31 46 46 0D 
              83B : 0A 00             
    1254/     83D :                     SRECER:
    1255/     83D : 53 39 30 33 30 30           DB	"S9030000FC",CR,LF,00H
              843 : 30 30 46 43 0D 0A 
              849 : 00                
    1256/     84A :                     
    1257/     84A :                     INIVEC:
    1258/     84A : E9 06 50 7F         	DW	INTDIV, MON_CSEG	; 00H Divide error
    1259/     84E : FF 06 50 7F         	DW	INTSTP, MON_CSEG	; 01H Single step
    1260/     852 : 15 07 50 7F         	DW	INTNMI, MON_CSEG	; 02H NMI
    1261/     856 : 2B 07 50 7F         	DW	INTBRK, MON_CSEG	; 03H Breakpoint
    1262/     85A : 42 07 50 7F         	DW	INTOVF, MON_CSEG	; 04H Overflow
    1263/     85E :                     INIVECE:
    1264/     85E :                     	
    1265/     85E : 0D 0A 44 69 76 69   DIVMSG:	DB	CR,LF,"Divide error",CR,LF,00H
              864 : 64 65 20 65 72 72 
              86A : 6F 72 0D 0A 00    
    1266/     86F : 0D 0A 53 74 65 70   STPMSG:	DB	CR,LF,"Step",CR,LF,00H
              875 : 0D 0A 00          
    1267/     878 : 0D 0A 4E 4D 49 0D   NMIMSG:	DB	CR,LF,"NMI",CR,LF,00H
              87E : 0A 00             
    1268/     880 : 0D 0A 42 72 65 61   BRKMSG:	DB	CR,LF,"Break",CR,LF,00H
              886 : 6B 0D 0A 00       
    1269/     88A : 0D 0A 4F 76 65 72   OVFMSG:	DB	CR,LF,"Overflow",CR,LF,00H
              890 : 66 6C 6F 77 0D 0A 
              896 : 00                
    1270/     897 :                     
    1271/     897 : D3 08 60 01         RDTAB:	DW	RDSAX, REGAX
    1272/     89B : D7 08 62 01         	DW	RDSBX, REGBX
    1273/     89F : DC 08 64 01         	DW	RDSCX, REGCX
    1274/     8A3 : E1 08 66 01         	DW	RDSDX, REGDX
    1275/     8A7 : E6 08 68 01         	DW	RDSF,  REGF
    1276/     8AB : EB 08 74 01         	DW	RDSCS, REGCS
    1277/     8AF : F0 08 76 01         	DW	RDSDS, REGDS
    1278/     8B3 : F5 08 78 01         	DW	RDSSS, REGSS
    1279/     8B7 : FA 08 7A 01         	DW	RDSES, REGES
    1280/     8BB : FF 08 6A 01         	DW	RDSSP, REGSP
    1281/     8BF : 05 09 6C 01         	DW	RDSBP, REGBP
    1282/     8C3 : 0A 09 6E 01         	DW	RDSSI, REGSI
    1283/     8C7 : 0F 09 70 01         	DW	RDSDI, REGDI
    1284/     8CB : 14 09 72 01         	DW	RDSIP, REGIP
    1285/     8CF :                     	
    1286/     8CF : 00 00 00 00         	DW	0000H, 0000H
    1287/     8D3 :                     
    1288/     8D3 : 41 58 3D 00         RDSAX:	DB	"AX=",00H
    1289/     8D7 : 20 42 58 3D 00      RDSBX:	DB	" BX=",00H
    1290/     8DC : 20 43 58 3D 00      RDSCX:	DB	" CX=",00H
    1291/     8E1 : 20 44 58 3D 00      RDSDX:	DB	" DX=",00H
    1292/     8E6 : 20 46 4C 3D 00      RDSF:	DB	" FL=",00H
    1293/     8EB : 20 43 53 3D 00      RDSCS:	DB	" CS=",00H
    1294/     8F0 : 20 44 53 3D 00      RDSDS:	DB	" DS=",00H
    1295/     8F5 : 20 53 53 3D 00      RDSSS:	DB	" SS=",00H
    1296/     8FA : 20 45 53 3D 00      RDSES:	DB	" ES=",00H
    1297/     8FF : 0D 0A 53 50 3D 00   RDSSP:	DB	CR,LF,"SP=",00H
    1298/     905 : 20 42 50 3D 00      RDSBP:	DB	" BP=",00H
    1299/     90A : 20 53 49 3D 00      RDSSI:	DB	" SI=",00H
    1300/     90F : 20 44 49 3D 00      RDSDI:	DB	" DI=",00H
    1301/     914 : 20 49 50 3D 00      RDSIP:	DB	" IP=",00H
    1302/     919 :                     
    1303/     919 : 20 46 4C 62 3D 00   FLGB:	db	" FLb=",00h
    1304/     91F : 2E 2E 2E 2E 4F 44   Fbiton:	db	"....ODITSZ.A.P.C"
              925 : 49 54 53 5A 2E 41 
              92B : 2E 50 2E 43       
    1305/     92F :                     
    1306/     92F :                     
    1307/     92F :                     RNTAB:
    1308/     92F : 41 0F               	DB	'A',0FH		; "A?"
    1309/     931 : 65 09 00 00         	DW	RNTABA,0
    1310/     935 : 42 0F               	DB	'B',0FH		; "B?"
    1311/     937 : 7D 09 00 00         	DW	RNTABB,0
    1312/     93B : 43 0F               	DB	'C',0FH		; "C?"
    1313/     93D : 9B 09 00 00         	DW	RNTABC,0
    1314/     941 : 44 0F               	DB	'D',0FH		; "D?"
    1315/     943 : B9 09 00 00         	DW	RNTABD,0
    1316/     947 : 45 0F               	DB	'E',0FH		; "E?"
    1317/     949 : B9 09 00 00         	DW	RNTABD,0
    1318/     94D : 46 02               	DB	'F',2		; "F"
    1319/     94F : 68 01 40 0A         	DW	REGF,RNF
    1320/     953 : 49 0F               	DB	'I',0FH		; "I?"
    1321/     955 : E9 09 00 00         	DW	RNTABI,0
    1322/     959 : 53 0F               	DB	'S',0FH		; "S?"
    1323/     95B : F5 09 00 00         	DW	RNTABS,0
    1324/     95F :                     
    1325/     95F : 00 00               	DB	00H,0		; End mark
    1326/     961 : 00 00 00 00         	DW	0,0
    1327/     965 :                     	
    1328/     965 :                     RNTABA:
    1329/     965 : 58 02               	DB	'X',2		; "AX"
    1330/     967 : 60 01 0D 0A         	DW	REGAX,RNAX
    1331/     96B : 48 01               	DB	'H',1		; "AH"
    1332/     96D : 61 01 10 0A         	DW	REGAX+1,RNAH
    1333/     971 : 4C 01               	DB	'L',1		; "AL"
    1334/     973 : 60 01 13 0A         	DW	REGAX,RNAL
    1335/     977 :                     
    1336/     977 : 00 00               	DB	00H,0		; End mark
    1337/     979 : 00 00 00 00         	DW	0,0
    1338/     97D :                     
    1339/     97D :                     RNTABB:
    1340/     97D : 58 02               	DB	'X',2		; "BX"
    1341/     97F : 62 01 16 0A         	DW	REGBX,RNBX
    1342/     983 : 48 01               	DB	'H',1		; "BH"
    1343/     985 : 63 01 19 0A         	DW	REGBX+1,RNBH
    1344/     989 : 4C 01               	DB	'L',1		; "BL"
    1345/     98B : 62 01 1C 0A         	DW	REGBX,RNBL
    1346/     98F : 50 02               	DB	'P',2		; "BP"
    1347/     991 : 6C 01 1F 0A         	DW	REGBP,RNBP
    1348/     995 :                     	
    1349/     995 : 00 00               	DB	00H,0		; End mark
    1350/     997 : 00 00 00 00         	DW	0,0
    1351/     99B :                     
    1352/     99B :                     RNTABC:
    1353/     99B : 58 02               	DB	'X',2		; "CX"
    1354/     99D : 64 01 22 0A         	DW	REGCX,RNCX
    1355/     9A1 : 48 01               	DB	'H',1		; "CH"
    1356/     9A3 : 65 01 25 0A         	DW	REGCX+1,RNCH
    1357/     9A7 : 4C 01               	DB	'L',1		; "CL"
    1358/     9A9 : 64 01 28 0A         	DW	REGCX,RNCL
    1359/     9AD : 53 02               	DB	'S',2		; "CS"
    1360/     9AF : 74 01 2B 0A         	DW	REGCS,RNCS
    1361/     9B3 :                     	
    1362/     9B3 : 00 00               	DB	00H,0		; End mark
    1363/     9B5 : 00 00 00 00         	DW	0,0
    1364/     9B9 :                     	
    1365/     9B9 :                     RNTABD:
    1366/     9B9 : 58 02               	DB	'X',2		; "DX"
    1367/     9BB : 66 01 2E 0A         	DW	REGDX,RNDX
    1368/     9BF : 48 01               	DB	'H',1		; "DH"
    1369/     9C1 : 67 01 31 0A         	DW	REGDX+1,RNDH
    1370/     9C5 : 4C 01               	DB	'L',1		; "DL"
    1371/     9C7 : 66 01 34 0A         	DW	REGDX,RNDL
    1372/     9CB : 49 02               	DB	'I',2		; "DI"
    1373/     9CD : 70 01 37 0A         	DW	REGDI,RNDI
    1374/     9D1 : 53 02               	DB	'S',2		; "DS"
    1375/     9D3 : 76 01 3A 0A         	DW	REGDS,RNDS
    1376/     9D7 :                     	
    1377/     9D7 : 00 00               	DB	00H,0		; End mark
    1378/     9D9 : 00 00 00 00         	DW	0,0
    1379/     9DD :                     
    1380/     9DD :                     RNTABE:
    1381/     9DD : 53 02               	DB	'S',2		; "ES"
    1382/     9DF : 7A 01 3D 0A         	DW	REGES,RNES
    1383/     9E3 :                     	
    1384/     9E3 : 00 00               	DB	00H,0		; End mark
    1385/     9E5 : 00 00 00 00         	DW	0,0
    1386/     9E9 :                     	
    1387/     9E9 :                     RNTABI:
    1388/     9E9 : 50 02               	DB	'P',2		; "IP"
    1389/     9EB : 72 01 42 0A         	DW	REGIP,RNIP
    1390/     9EF :                     	
    1391/     9EF : 00 00               	DB	00H,0		; End mark
    1392/     9F1 : 00 00 00 00         	DW	0,0
    1393/     9F5 :                     	
    1394/     9F5 :                     RNTABS:
    1395/     9F5 : 49 02               	DB	'I',2		; "SI"
    1396/     9F7 : 6E 01 45 0A         	DW	REGSI,RNSI
    1397/     9FB : 50 02               	DB	'P',2		; "SP"
    1398/     9FD : 6A 01 48 0A         	DW	REGSP,RNSP
    1399/     A01 : 53 02               	DB	'S',2		; "SS"
    1400/     A03 : 78 01 4B 0A         	DW	REGSS,RNSS
    1401/     A07 :                     	
    1402/     A07 : 00 00               	DB	00H,0		; End mark
    1403/     A09 : 00 00 00 00         	DW	0,0
    1404/     A0D :                     	
    1405/     A0D : 41 58 00            RNAX:	DB	"AX",00H
    1406/     A10 : 41 48 00            RNAH:	DB	"AH",00H
    1407/     A13 : 41 4C 00            RNAL:	DB	"AL",00H
    1408/     A16 : 42 58 00            RNBX:	DB	"BX",00H
    1409/     A19 : 42 48 00            RNBH:	DB	"BH",00H
    1410/     A1C : 42 4C 00            RNBL:	DB	"BL",00H
    1411/     A1F : 42 50 00            RNBP:	DB	"BP",00H
    1412/     A22 : 43 58 00            RNCX:	DB	"CX",00H
    1413/     A25 : 43 48 00            RNCH:	DB	"CH",00H
    1414/     A28 : 43 4C 00            RNCL:	DB	"CL",00H
    1415/     A2B : 43 53 00            RNCS:	DB	"CS",00H
    1416/     A2E : 44 58 00            RNDX:	DB	"DX",00H
    1417/     A31 : 44 48 00            RNDH:	DB	"DH",00H
    1418/     A34 : 44 4C 00            RNDL:	DB	"DL",00H
    1419/     A37 : 44 49 00            RNDI:	DB	"DI",00H
    1420/     A3A : 44 53 00            RNDS:	DB	"DS",00H
    1421/     A3D : 45 53 00            RNES:	DB	"ES",00H
    1422/     A40 : 46 00               RNF:	DB	"F",00H
    1423/     A42 : 49 50 00            RNIP:	DB	"IP",00H
    1424/     A45 : 53 49 00            RNSI:	DB	"SI",00H
    1425/     A48 : 53 50 00            RNSP:	DB	"SP",00H
    1426/     A4B : 53 53 00            RNSS:	DB	"SS",00H
    1427/     A4E :                     
    1428/     A4E :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1429/     A4E :                     ;
    1430/     A4E :                     ; input / output console
    1431/     A4E :                     ;
    1432/     A4E :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1433/     A4E :                     STROUT:
    1434/     A4E : 51                  	push	cx
    1435/     A4F : 52                  	push	dx
    1436/     A50 : 53                  	push	bx
    1437/     A51 : 1E                  	push	ds
    1438/     A52 : 8C DA               	mov	dx, ds
    1439/     A54 : EB 06               	jmp	msg_out
    1440/     A56 :                     
    1441/     A56 :                     MSGOUT:
    1442/     A56 : 51                  	push	cx
    1443/     A57 : 52                  	push	dx
    1444/     A58 : 53                  	push	bx
    1445/     A59 : 1E                  	push	ds
    1446/     A5A : 8C CA               	mov	dx, cs
    1447/     A5C :                     msg_out:
    1448/     A5C : 32 C9               	xor	cl, cl		; clear count
    1449/     A5E : 8E DA               	mov	ds, dx
    1450/     A60 :                     msg_lp:
    1451/     A60 : 8A 07               	mov	al, [bx]
    1452/     A62 : 0A C0               	or	al, al
    1453/     A64 : 74 05               	jz	msg_cend
    1454/     A66 : FE C1               	inc	cl
    1455/     A68 : 43                  	inc	bx
    1456/     A69 : EB F5               	jmp	msg_lp
    1457/     A6B :                     
    1458/     A6B :                     msg_cend:
    1459/     A6B : 1F                  	pop	ds
    1460/     A6C : 5B                  	pop	bx
    1461/     A6D : 2E C6 06 00 00 04   	mov	cs:[UREQ_COM], REQ_STROUT	; set command
    1462/     A73 : 2E 88 0E 01 00      	mov	cs:[UNI_CHR], cl		; set string bytyes
    1463/     A78 : 2E 89 1E 02 00      	mov	cs:[STR_OFF], bx		; set string offset
    1464/     A7D : 2E 89 16 04 00      	mov	cs:[STR_SEG], dx		; set string segment
    1465/     A82 :                     
    1466/     A82 :                     stout_req:
    1467/     A82 : E6 00               	out	DUMMY_PORT, al		; invoke PIC F/W
    1468/     A84 :                     
    1469/     A84 :                     wait_stout:
    1470/     A84 : 2E A0 00 00         	mov	al, cs:[UREQ_COM]
    1471/     A88 : 0A C0               	or	al, al
    1472/     A8A : 75 F8               	jnz	wait_stout
    1473/     A8C :                     
    1474/     A8C : 5A                  	pop	dx
    1475/     A8D : 59                  	pop	cx
    1476/     A8E : C3                  	ret
    1477/     A8F :                     
    1478/     A8F :                     CONIN:
    1479/     A8F : 2E C6 06 00 00 01   	mov	cs:[UREQ_COM], REQ_CONIN	; set CONIN request
    1480/     A95 :                     CON_REQ:
    1481/     A95 : E6 00               	out	DUMMY_PORT, al			; make IO/M = 1 then invoke PIC F/W
    1482/     A97 :                     wait_conin:
    1483/     A97 : 2E A0 00 00         	mov	al, cs:[UREQ_COM]
    1484/     A9B : 0A C0               	or	al, al
    1485/     A9D : 75 F8               	jnz	wait_conin
    1486/     A9F :                     
    1487/     A9F : 2E A0 01 00         	mov	al, cs:[UNI_CHR]		; get char or status
    1488/     AA3 : 22 C0               	and	al, al
    1489/     AA5 : C3                  	ret
    1490/     AA6 :                     
    1491/     AA6 :                     CONST:
    1492/     AA6 : 2E C6 06 00 00 03   	mov	cs:[UREQ_COM], REQ_CONST	; set CONST request
    1493/     AAC : EB E7               	jmp	CON_REQ
    1494/     AAE :                     
    1495/     AAE :                     CONOUT:
    1496/     AAE : 2E C6 06 00 00 02   	mov	cs:[UREQ_COM], REQ_CONOUT	; set CONOUT request
    1497/     AB4 : 2E A2 01 00         	mov	cs:[UNI_CHR], al		; set char
    1498/     AB8 : EB DB               	jmp	CON_REQ
    1499/     ABA :                     ;
    1500/     ABA :                     ; end unimon code
    1501/     ABA :                     ;
    1502/     ABA :                     
    1503/     ABA : =0AF0H               reset_vec	equ 07fff0h-MON_CSEG*16
    1504/     ABA :                     
    1505/     ABA : FF FF FF FF FF FF   	db	reset_vec - $ dup(0FFH)
              AC0 : FF FF FF FF FF FF 
              AC6 : FF FF FF FF FF FF 
              ACC : FF FF FF FF FF FF 
              AD2 : FF FF FF FF FF FF 
              AD8 : FF FF FF FF FF FF 
              ADE : FF FF FF FF FF FF 
              AE4 : FF FF FF FF FF FF 
              AEA : FF FF FF FF FF FF 
    1506/     AF0 :                     
    1507/     AF0 :                     	;;
    1508/     AF0 :                     	;; Reset entry point
    1509/     AF0 :                     	;;
    1510/     AF0 :                     	
    1511/     AF0 : EA 10 00 50 7F      	JMPF	MON_CSEG:CSTART
    1512/     AF5 :                     
    1513/     AF5 : FF FF FF FF FF FF   	db	10h - ($ & 0fh) dup(0ffh)
              AFB : FF FF FF FF FF    
    1514/     B00 :                     ;;;
    1515/     B00 :                     ;;; RAM area
    1516/     B00 :                     ;;;
    1517/     B00 :                     
    1518/       0 :                     	SEGMENT	DATA
    1519/       0 :                     
    1520/       0 :                     	;;
    1521/       0 :                     	;; Work area
    1522/       0 :                     	;;
    1523/       0 :                     
    1524/     100 :                     	ORG	WORK_B
    1525/     100 :                     
    1526/     100 :                     INBUF:	DS	BUFLEN	; Line input buffer
    1527/     150 :                     CURSEG:	DS	2	; Current segment
    1528/     152 :                     DSADDR:	DS	2	; DUMP start address
    1529/     154 :                     DEADDR:	DS	2	; DUMP end address
    1530/     156 :                     DSTATE:	DS	1	; DUMP state
    1531/     157 :                     	ALIGN	2
    1532/     158 :                     GADDR:	DS	2	; GO address
    1533/     15A :                     SADDR:	DS	2	; SET address
    1534/     15C :                     HEXMOD:	DS	1	; HEX file mode
    1535/     15D :                     PSPEC:	DS	2	; Processor spec.
    1536/     15F :                     
    1537/     15F :                     RECTYP:	DS	1	; Record type
    1538/     160 :                     
    1539/     160 :                     	ALIGN	2
    1540/     160 :                     REG_B:	
    1541/     160 :                     REGAX:	DS	2
    1542/     162 :                     REGBX:	DS	2
    1543/     164 :                     REGCX:	DS	2
    1544/     166 :                     REGDX:	DS	2
    1545/     168 :                     REGF:	DS	2
    1546/     16A :                     REGSP:	DS	2		; Stack Pointer SP
    1547/     16C :                     REGBP:	DS	2		; Base Pointer BP
    1548/     16E :                     REGSI:	DS	2		; Source Index SI
    1549/     170 :                     REGDI:	DS	2		; Destination Index DI
    1550/     172 :                     REGIP:	DS	2		; Instruction Pointer IP
    1551/     174 :                     REGCS:	DS	2		; Code Segment CS
    1552/     176 :                     REGDS:	DS	2		; Data Segment DS
    1553/     178 :                     REGSS:	DS	2		; Stack Segment SS
    1554/     17A :                     REGES:	DS	2		; Extra Segment ES
    1555/     17C :                     REG_E:	
    1556/     17C :                     
    1557/     17C :                     ; break point
    1558/     17C :                     bflg	ds	1
    1559/     17D :                     bp_code	ds	1
    1560/     17E :                     brkcs	ds	2
    1561/     180 :                     brkip	ds	2
    1562/     182 :                     
    1563/     182 :                     ; Frag register bit image string buffer
    1564/     182 :                     F_bit:		ds	F_bitSize+1
    1565/     193 :                     
    1566/     193 :                     	END
 AS V1.42 Beta [Bld 227] - Source File unimon_8086.asm - Page 2 - 4/19/2024 13:48:3


  Symbol Table (* = unused):
  --------------------------

*ABORT_ENTRY :                    3 - |
*ARCHITECTURE :                                        "i386-unknown-win32" - |
 BFLG :                         17C D |  BIOS_ENTRY :                  2500 - |
 BIOS_IP :                     2500 - |  BP_CODE :                      17D D |
 BRKCS :                        17E D |  BRKIP :                        180 D |
 BRKMSG :                       880 C |  BS :                             8 - |
 BUFLEN :                        50 - | *CASESENSITIVE :                  0 - |
*CBI_CHR :                        7 C |  CHK_BPT :                      799 C |
*COMPMODE :                       0 - | *COM_BUF :                        0 - |
 CONIN :                       0A8F C |  CONOUT :                      0AAE C |
 CONST :                       0AA6 C | *CONSTPI :        3.141592653589793 - |
 CON_REQ :                     0A95 C |  CPM86 :                          1 - |
 CPM86_CODE :                    40 - |  CPU_MSG :                      7EA C |
 CR :                            0D - | *CREQ_COM :                       6 C |
 CRLF :                         618 C |  CSTART :                        10 C |
 CURSEG :                       150 D | *DATA_DMAH :                     0E C |
*DATA_DMAL :                     0C C | *DATE :                 "4/19/2024" - |
 DEADDR :                       154 D |  DEL :                           7F - |
*DISK_DRIVE :                     8 C | *DISK_SECTOR :                   0A C |
*DISK_TRACK :                     9 C |  DIVMSG :                       85E C |
 DP0 :                          13A C |  DP01 :                         14C C |
 DP1 :                          164 C |  DPB :                          1F7 C |
 DPB0 :                         209 C |  DPB1 :                         218 C |
 DPB2 :                         21D C |  DPB3 :                         239 C |
 DPL :                          1B0 C |  DPL0 :                         1CC C |
 DPL1 :                         1DD C |  DPL2 :                         1ED C |
 DPL3 :                         1F2 C |  DPM :                          17A C |
 DPM0 :                         18A C |  DPM1 :                         1A6 C |
 DSADDR :                       152 D |  DSEP0 :                        828 C |
 DSEP1 :                        82B C |  DSTATE :                       156 D |
 DUMMY_PORT :                     0 - |  DUMP :                         11D C |
 ERR :                          115 C |  ERRMSG :                       820 C |
*FALSE :                          0 - |  FBITON :                       91F C |
 FB_LOOP :                      53E C |  FLGB :                         919 C |
 FREE_SEG :                      40 - | *FULLPMMU :                       1 - |
 F_BIT :                        182 D |  F_BITSIZE :                     10 - |
 F_MSK_BIT :                   0FD5 - |  G0 :                           25D C |
 G0_0 :                         291 C |  G1 :                           264 C |
 G2 :                           279 C |  GADDR :                        158 D |
 GE :                           276 C |  GETLIN :                       622 C |
 GL0 :                          627 C |  GLB :                          651 C |
 GLE :                          669 C |  GO :                           23A C |
 GO_ANYWHERE :                  2BC C |  GO_GO :                        2A1 C |
*HAS64 :                          0 - | *HASFPU :                         0 - |
*HASPMMU :                        0 - |  HEXIN :                        5EC C |
 HEXMOD :                       15C D |  HEXOUT1 :                      5DF C |
 HEXOUT2 :                      5D2 C |  HEXOUT4 :                      5CB C |
 HI0 :                          5F9 C |  HI1 :                          613 C |
 HIR :                          617 C |  HO10 :                         5E9 C |
 ID_V20 :                       0B0 C |  IHEMSG :                       806 C |
*IHEXER :                       82F C |  IM88 :                         7F6 C |
 IMV20 :                        7FD C |  INBUF :                        100 D |
 INI0 :                          6E C |  INI1 :                          85 C |
 INIVEC :                       84A C |  INIVECE :                      85E C |
*INSUPMODE :                      0 - |  INT0 :                         756 C |
 INT21HVEC :                     84 - |  INTBRK :                       72B C |
 INTDIV :                       6E9 C |  INTDMY :                       7B7 C |
 INTFNC :                       6B6 C |  INTNMI :                       715 C |
 INTOVF :                       742 C |  INTSTP :                       6FF C |
 INVOKE_MSG :                   7C7 C |  IR0 :                           3D C |
 LF :                            0A - |  LH0 :                          3A2 C |
 LH1 :                          3A4 C |  LH2 :                          3B0 C |
 LH3 :                          3C3 C |  LHE :                          3D0 C |
 LHI0 :                         3D3 C |  LHI1 :                         3F8 C |
 LHI2 :                         409 C |  LHI3 :                         40D C |
 LHIE :                         421 C |  LHS0 :                         42A C |
 LHS1 :                         450 C |  LHS2 :                         462 C |
 LHS3 :                         466 C |  LHSE :                         479 C |
 LHSR :                         41B C | *LISTON :                         1 - |
 LOADH :                        386 C |  M00 :                          0F2 C |
 M01 :                          0F9 C |  M02 :                          100 C |
 M03 :                          107 C |  M05 :                          10E C |
 M06 :                          115 C | *MACEXP :                         7 - |
 MNI_LEDOFF :                     7 - | *MOMCPU :                      8086 - |
*MOMCPUNAME :                "8086" - |  MON_CSEG :                    7F50 - |
 MON_DSEG :                    7F30 - |  MSGOUT :                      0A56 C |
 MSG_CEND :                    0A6B C |  MSG_LP :                      0A60 C |
 MSG_OUT :                     0A5C C | *NESTMAX :                      100 - |
 NFNC1 :                        6BF C |  NFNC2 :                        6CA C |
 NFNC3 :                        6D7 C |  NFNC4 :                        6D6 C |
 NMIMSG :                       878 C |  NOBRKP :                       7B4 C |
 OVFMSG :                       88A C | *PADDING :                        1 - |
 PROMPT :                       803 C |  PSPEC :                        15D D |
 RD0 :                          512 C |  RD1 :                          52A C |
 RDF1 :                         547 C |  RDF2 :                         54C C |
 RDHEX :                        686 C |  RDSAX :                        8D3 C |
 RDSBP :                        905 C |  RDSBX :                        8D7 C |
 RDSCS :                        8EB C |  RDSCX :                        8DC C |
 RDSDI :                        90F C |  RDSDS :                        8F0 C |
 RDSDX :                        8E1 C |  RDSES :                        8FA C |
 RDSF :                         8E6 C |  RDSIP :                        914 C |
 RDSSI :                        90A C |  RDSSP :                        8FF C |
 RDSSS :                        8F5 C |  RDTAB :                        897 C |
 RDUMP :                        50F C |  RECTYP :                       15F D |
 REG :                          482 C |  REGAX :                        160 D |
 REGBP :                        16C D |  REGBX :                        162 D |
 REGCS :                        174 D |  REGCX :                        164 D |
 REGDI :                        170 D |  REGDS :                        176 D |
 REGDX :                        166 D |  REGES :                        17A D |
 REGF :                         168 D |  REGIP :                        172 D |
 REGSI :                        16E D |  REGSP :                        16A D |
 REGSS :                        178 D |  REG_B :                        160 D |
 REG_E :                        17C D | *RELAXED :                        0 - |
 REQ_CONIN :                      1 - |  REQ_CONOUT :                     2 - |
 REQ_CONST :                      3 - |  REQ_STROUT :                     4 - |
 RESET_VEC :                   0AF0 - |  RG0 :                          493 C |
 RG1 :                          496 C |  RG2 :                          4A8 C |
 RG3 :                          4BC C |  RG4 :                          4E5 C |
 RG5 :                          4EA C |  RG6 :                          507 C |
 RG7 :                          509 C |  RGE :                          50C C |
 RGR :                          509 C |  RH0 :                          68D C |
 RH1 :                          6A4 C |  RHE :                          6B5 C |
 RNAH :                        0A10 C |  RNAL :                        0A13 C |
 RNAX :                        0A0D C |  RNBH :                        0A19 C |
 RNBL :                        0A1C C |  RNBP :                        0A1F C |
 RNBX :                        0A16 C |  RNCH :                        0A25 C |
 RNCL :                        0A28 C |  RNCS :                        0A2B C |
 RNCX :                        0A22 C |  RNDH :                        0A31 C |
 RNDI :                        0A37 C |  RNDL :                        0A34 C |
 RNDS :                        0A3A C |  RNDX :                        0A2E C |
 RNES :                        0A3D C |  RNF :                         0A40 C |
 RNIP :                        0A42 C |  RNSI :                        0A45 C |
 RNSP :                        0A48 C |  RNSS :                        0A4B C |
 RNTAB :                        92F C |  RNTABA :                       965 C |
 RNTABB :                       97D C |  RNTABC :                       99B C |
 RNTABD :                       9B9 C | *RNTABE :                       9DD C |
 RNTABI :                       9E9 C |  RNTABS :                       9F5 C |
 SADDR :                        15A D |  SETM :                         2FC C |
 SHEMSG :                       813 C |  SKIPSP :                       671 C |
 SM0 :                          316 C |  SM1 :                          323 C |
 SM2 :                          360 C |  SM3 :                          36B C |
 SM4 :                          372 C |  SME :                          383 C |
*SRECER :                       83D C |  SSR :                          67A C |
 STACK :                        100 - | *STOUT_REQ :                   0A82 C |
 STPMSG :                       86F C |  STROUT :                      0A4E C |
 STR_OFF :                        2 C |  STR_SEG :                        4 C |
 T0 :                           578 C |  T1 :                           57F C |
*TARGET :                    "8088" - |  TBIT_OFF :                    0ED5 - |
 TBIT_ON_ :                     100 - |  TE :                           585 C |
*TIME :                   "13:48:3" - |  TO_GO :                        588 C |
 TRACE :                        55E C | *TRUE :                           1 - |
 UNI_CHR :                        1 C |  UPPER :                        67B C |
 UPR :                          685 C |  UREQ_COM :                       0 C |
 VECSIZ :                       100 - | *VERSION :                     142F - |
 WAIT_CONIN :                  0A97 C |  WAIT_STOUT :                  0A84 C |
 WORK_B :                       100 - |  WORM_ENTRY :                  2503 - |
 WSTART :                       0CC C |

    291 symbols
     35 unused symbols

 AS V1.42 Beta [Bld 227] - Source File unimon_8086.asm - Page 3 - 4/19/2024 13:48:3


  Code Pages:
  ----------

STANDARD (0 changed characters)

1 code page

0.04 seconds assembly time

   1567 lines source file
      3 passes
      0 errors
      0 warnings
